!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).HeyColor=e()}(this,function(){"use strict";return class{constructor(t,e={}){this.image=t,this.definition=e.definition||40,this.colorLength=10,this.getImageData()}getImageData(){console.time(1);const t=this.image.width,e=this.image.height;let n=t,o=e;t>e?(n=Math.min(500,t),o=Math.min(500*e/t,e)):(n=Math.min(500*t/e,t),o=Math.min(500,e));const i=document.createElement("canvas");i.width=n,i.height=o;const s=i.getContext("2d");console.timeEnd(1),console.time(2),s.drawImage(this.image,0,0,t,e,0,0,n,o),console.timeEnd(2),console.time(3),this.imageDate=s.getImageData(0,0,s.canvas.width,s.canvas.height),console.timeEnd(3),console.time(4),this.analysisColor(),console.timeEnd(4)}analysisColor(){const t=this.imageDate.data,e=[];console.time(1.1);const n=1.5*this.definition,o=2*this.definition,i=40/this.definition,s=40/n,a=40/o;for(let c=0;c<t.length;c+=4){const m=t[c],l=t[c+1],h=t[c+2],r=parseInt(t[c]/this.definition),d=parseInt(t[c+1]/n),g=parseInt(t[c+2]/o);if(r<i&&d<s||d<s&&g<a||r<i&&g<a)continue;const f=`${r}_${d}_${g}`;e[f]=e[f]||{colorRGB:[m,l,h],colors:[],count:0},e[f].count+=1}console.timeEnd(1.1),console.time(1.2);const c=[];Object.keys(e).forEach(t=>{const n=e[t].colorRGB;n.push(e[t].count),c.push(n)}),console.timeEnd(1.2),console.time(1.3),c.sort((t,e)=>e[3]-t[3]),this.mainColor=c[0],this.colorAnalysArr=c,console.timeEnd(1.3)}getPattern(t=10){const e=this.colorAnalysArr,n=[{max:0,min:1/0,index:0},{max:0,min:1/0,index:1},{max:0,min:1/0,index:2}];for(let t=0;t<e.length;t+=1){const o=e[t];for(let t=0;t<3;t++)n[t].min=Math.min(n[t].min,o[t]),n[t].max=Math.max(n[t].max,o[t])}n.sort((t,e)=>e.max-e.min-(t.max-t.min));const o=n[0].index;e.sort((t,e)=>e[o]-t[o]);let i=[];const s=Math.min(t,e.length);for(let t=0;t<s;t++){const n=Math.round(e.length/s*t),o=Math.round(e.length/s*(t+1))-1;i.push(e.slice(n,o))}return(i=i.map(t=>t.sort((t,e)=>e[3]-t[3])[0])).map(t=>t.slice(0,3))}getMainColor(){return this.mainColor.slice(0,3)}}});//# sourceMappingURL=heyColor.js.map
